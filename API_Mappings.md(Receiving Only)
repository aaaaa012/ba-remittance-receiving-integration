# API Mappings â€“ Receiving Flow (Redacted & Generic)

This document contains **generic API request/response mappings** for receiving (payout) operations.

---

## 1. Fetch Eligible Payout List

### **Endpoint**  
`POST /payout/list`

### **Purpose**  
Return transactions in `READY_TO_PAY` status.

### **Request (Generic)**

```json
{
  "acceptedOnly": false,
  "offset": 0
}
```

### **Response (Generic)**

```json
{
  "transactions": [
    {
      "transferNumber": "string",
      "destinationAmount": 100.00,
      "currency": "XXX",
      "receiver": {
        "name": "John",
        "surname": "Doe",
        "phone": "9800000000"
      },
      "bankDetails": {
        "bankName": "Example Bank",
        "accountNumber": "XXXXXXXXXX"
      },
      "outerDetails": "Base64EncodedAdditionalData"
    }
  ]
}
```

---

## 2. Payout Pre-Calculation

### **Endpoint**  
`POST /payout/precalculate/{transferNumber}`

### **Purpose**  
Calculate payout amount and fees before preparing.

### **Request**

```json
{
  "payoutCurrency": "XXX"
}
```

### **Response**

```json
{
  "destinationAmount": 100.00,
  "payoutAmount": 100.00,
  "fees": {
    "standard": 2.00,
    "conversion": 1.25
  },
  "bankDetails": { ... },
  "receiverDetails": { ... }
}
```

---

## 3. Payout Prepare

### **Endpoint**  
`POST /payout/prepare/{transferNumber}`

### **Purpose**  
Move transaction to `PREPARE_TO_PAY`.

### **Request**

```json
{
  "payoutCurrency": "XXX"
}
```

### **Response**

```json
{
  "status": "PREPARE_TO_PAY",
  "payoutAmount": 100.00
}
```

---

## 4. Final Payout

### **Endpoint**  
`POST /payout`

### **Request**

```json
{
  "transferNumber": "string"
}
```

### **Response**

```json
{
  "status": "COMPLETED"
}
```

---

## 5. Set Error Status

### **Endpoint**  
`POST /payout/error`

### **Request**

```json
{
  "transferNumber": "string",
  "reason": "string"
}
```

### **Response**

```json
{
  "status": "ERROR"
}
```

